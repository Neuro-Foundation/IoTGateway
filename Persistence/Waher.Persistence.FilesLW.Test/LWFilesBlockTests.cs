using System;
using System.Collections.Generic;
using System.Text;
using System.Threading.Tasks;
using Microsoft.VisualStudio.TestTools.UnitTesting;
using Waher.Persistence.Serialization;
using Waher.Runtime.Console;

#if !LW
namespace Waher.Persistence.Files.Test
#else
using Waher.Persistence.Files;
namespace Waher.Persistence.FilesLW.Test
#endif
{
	[TestClass]
	public class BlocksTests
	{
		private const int BlockSize = 16384;
		private const int BlocksInCache = 10000;

		private static ObjectBTreeFile file;
		private static FilesProvider provider;

		[ClassInitialize]
		public static async Task ClassInitialize(TestContext Context)
		{
			DBFilesBTreeTests.DeleteFiles();

#if LW
			provider = await FilesProvider.CreateAsync("Data", "Default", BlockSize, BlocksInCache, Math.Max(BlockSize / 2, 1024), Encoding.UTF8, 10000);
#else
			provider = await FilesProvider.CreateAsync("Data", "Default", BlockSize, BlocksInCache, Math.Max(BlockSize / 2, 1024), Encoding.UTF8, 10000, true);
#endif
			file = await provider.GetFile("Default");
		}

		[ClassCleanup]
		public static void ClassCleanup()
		{
			if (provider is not null)
			{
				provider.Dispose();
				provider = null;
			}

			file = null;
		}

		[TestMethod]
		public async Task DBFiles_Block_Test_01_SaveBlock()
		{
			byte[] Block = new byte[BlockSize];
			int i;

			for (i = 0; i < BlockSize; i++)
				Block[i] = (byte)i;

			await file.SaveBlock(0, Block);
		}

		[TestMethod]
		public async Task DBFiles_Block_Test_02_LoadBlock()
		{
			file.ClearCache();
			byte[] Block = await file.LoadBlock(0);
			int i;

			Assert.AreEqual(BlockSize, Block.Length);

			for (i = 0; i < BlockSize; i++)
				Assert.AreEqual((byte)i, Block[i]);
		}

		[TestMethod]
		public async Task DBFiles_Block_Test_03_Parse()
		{
			byte[] Block = Convert.FromBase64String("IR8OAAAAAAAAAKMDAAAAAAAAD1suKNmDRMbEbb710pWYTqoEAAEPkQEyMDIwXDA2XDA3XGIxY2RhMWI5ZDE1ZDVmNGE0NzEzYWMyZWZhZmU5NjRlOTA3Yzg2Yjk2Y2VhYjM0OTIzYTBhOGI2ZWUzMjAyYTZjMDI5NmQ1MmRiNzA1OTM3Zjc3ZDY4Y2JlNTUxNmI0NDY4ODA3YWNiZTBlMmJhYjM5N2E2MTRkYjJhYzZmODk5LmJsb2NrAhFAekCgYQN6fyqbzMytutgblmU4wvB+ShCuDcJsDYg7z15YN+enEgUmWUZq9Q/PJmtdzzvetE8xPPGFuxR6V7oSYAMRcvW4ND+HmNgpNwP1Y4U1JLG20l2O95mPMTdQ/1J8E1L7/KYDaKfSKlRtTEPMh/FqRjFxCtSMknyrAMcrJkE/nDDpZsp/h1hLc2fNbVRsFB0Ixm67iGMAxkqQwYLpKWPCpByszCjdF18FWwF4duTLXzw9AAseAd0DfWh0dHB4Oi8vbGFiLnRhZ3Jvb3QuaW9AdGFncm9vdC5pby9OTC9CL2VrQ2dZUU42ZnlxYnpNeXR1dGdibG1VNHd2Qi1TaEN1RGNKc0RZZzd6MTVZTi1lbkVnVW1XVVpxOVFfUEptdGR6enZldEU4eFBQR0Z1eFI2VjdvU1lBDAgyDwAAAAAAAA0ADgAEDyFndWlkZS50YWdyb290LmlvQGN5YmVyY2l0eS5vbmxpbmUFDw9SZW1vdGVFbmRwb2ludHMGTHBny5sWC9gICAz/Pzf0dSjKKwAAAAAAD1suKNmDRcbEbb710r5Q46IEAAEPkQEyMDIwXDA2XDA3XDdmZTNlMzBkY2RiYTFjMWZiNTkwZWRhMmY3ZDBkZmExNjhhMzU2YjA0Njg3Zjk5MDhiNjhlZmQzOGY3NTg0NzBhNDZmMWJhOGJjODdjY2RlYjFjZDg1NTE5MzFmZDZkMjVjZjBjM2U0YWJjZmYyZGVjZjQyYmE3MDY1ODBjNjAxLmJsb2NrAhFAiaizeVICkpiIeCaidf7LrAPo8b+S4o3GZ09DxFxkcVrb6K5EAVQJfLc7aPDkR6/ND2HmSI/vTIaG84fKvr1DFwMRcsY3F2dap2cc2OF8fy/6B7ayo3wj/COT/ZMh/fgudiWs20Z4q4CYiQ5SXfSvg+fXO7Hvr4iY/u9JgBWjEMVfCnHI+pcaReFa13InmbIa8Y7bNGb957REDWOJmDzmTK464mqaiIm2rxUk6Tek71Wdgbg2AAseAd0DfWh0dHB4Oi8vbGFiLnRhZ3Jvb3QuaW9AdGFncm9vdC5pby9OTC9CL2lhaXplVklDa3BpSWVDYWlkZjdMckFQbzhiLVM0bzNHWjA5RHhGeGtjVnJiNks1RUFWUUpmTGM3YVBEa1I2X05EMkhtU0lfdlRJYUc4NGZLdnIxREZ3DAiTAQAAAAAAAA0ADgAEDxlsYWIudGFncm9vdC5pb0B0YWdyb290LmlvBQ8PUmVtb3RlRW5kcG9pbnRzBkxw0lpgrQrYCAgM/z839HUoyisAAAAAAA9bLijZg0bGxG2+9dL4/v2hBAABD5EBMjAyMFwwNlwwN1xhNjBmNzY5MTQ0MjZlMTk1ODE5YzA4ZjVkMzkxZGE1OTRjNTNhN2Q0YzI3MDNhZTNiOWE3ODQ1N2FkZTYzMTQ5ZTFjODliY2M5OWMyZTk0N2VlZTBhZDAzYzlhYmE3MjFkMjNjOTg1NmU3M2E4NzAxN2VjY2NhZDQyNjAwODY4ZC5ibG9jawIRQIqmqfltkchgjAYJZAF8AMvOvUe1ihO71TD/PXnYxPehosdGRl4b6zvw1gGvra4f491fa8yF4JNZ1JFUPtBj3dUDEXJ1HmqXt6Ibul6kkhn2sbwRW9mxINqn0fkrlEIuQKi4F44bo2gmIVf2A9u3ebFjUqhMm97XgMbnAADqNimQ7vVO06Q6qVi5X1UsylguJrPoCTRNjknGC301HaQXtLjMOv2sjkjptKJZs6Jb4ojYr0PTKgALHgHdA31odHRweDovL2xhYi50YWdyb290LmlvQHRhZ3Jvb3QuaW8vTkwvQi9pcWFwLVcyUnlHQ01CZ2xrQVh3QXk4NjlSN1dLRTd2Vk1QODllZGpFOTZHaXgwWkdYaHZyT19EV0FhLXRyaF9qM1Y5cnpJWGdrMW5Va1ZRLTBHUGQxUQwIPwIAAAAAAAANAA4ABA8YYnIudGFncm9vdC5pb0B0YWdyb290LmlvBQ8PUmVtb3RlRW5kcG9pbnRzBkzA1FDGOgvYCAgM/z839HUoyisAAAAAAA9bLijZg0fGxG2+9dJrmCOqBAABD5EBMjAyMFwwNlwwN1w4YmZmMzc3OGNkMWZhYjBjOGU5YjA3NDM5MTc3MmRlZjQ5MDJkMDNkMTZmN2ViNGUwODkxOGFhOTE4NWFhY2E5ODNjNjY3OTJlMTFjNWVjMzA1OWRjYmY2NGI0NTZhZTkxODQ0ZGY0ZGI0MWY1ZWYyMDFlMmUzZDQ2N2EyNmY0ZS5ibG9jawIRQItb4wuJ2laV9T2z46d6yUy5vVJuA+Njn0Ek6tOzSvdRwICrXTLkJc6CZtg9pbMlf77tRVnLBmY+XUueUamfu0UDEXJ5Tz8Zub3pLlrj6Uc4nbJoR8w+ikQgW8hBzvW1u0y+m2VZ3Eun1CwOlsgyDDn4s5YN4SpjZvC6fYCh+sECxPP8yMf6Q4gcgqi3hfjgg/zLZ27wzC18rXzOkPcKd3LztQTpFZMM00+tWrP50N31fvORJQALHgHdA31odHRweDovL2xhYi50YWdyb290LmlvQHRhZ3Jvb3QuaW8vTkwvQi9pMXZqQzRuYVZwWDFQYlBqcDNySlRMbTlVbTRENDJPZlFTVHEwN05LOTFIQWdLdGRNdVFsem9KbTJEMmxzeVZfdnUxRldjc0daajVkUzU1UnFaLTdSUQwICAkAAAAAAAANAA4ABA8hZ3VpZGUudGFncm9vdC5pb0BjeWJlcmNpdHkub25saW5lBQ8PUmVtb3RlRW5kcG9pbnRzBkxwiGP6nwrYCAgM/z839HUoyisAAAAAAA9bLijZg0jGxG2+9dKikF6iBAABD5EBMjAyMFwwNlwwN1xmMGMxMGEzN2U4OTBlYTdlZTI0YzNjODQzMmUwNGE4YTI2YmU1M2Y3Y2JiOWFiMmU0NmJiZWY1ZDZiZTgwM2ZhOTJlZTY5OWRjOWM3ZmJlOWY3OWQ5OTkxZDM0ZjU3MDg5NTBhNjIzYjgwOTM1NjRhZDE4YzQzOWQ1MTA3YTJlZi5ibG9jawIRQIw3O/3tDQnLlD5qdbQEqUe4cAVg9d7Onb3HO+A1+OIdvihR2DMg1UqPCy6F/sGjxM/tBvnE1ZfzuTp/yuZqlusDEXJQvV+B7KfezUywrao4xlf6U7Ti3cG46DFlHU2xSLAd8Zlo7mRprTxSxvIO+cBV7DpLe4lioyNdI4Du2y/mM0FE1hyvQnf8uHU5oSyLScQQ8p8j/2UXBZq2XQfk87DdtC+utnrH2zmz025DGmbUfIeuGgALHgHdA31odHRweDovL2xhYi50YWdyb290LmlvQHRhZ3Jvb3QuaW8vTkwvQi9qRGM3X2UwTkNjdVVQbXAxdEFTcFI3aHdCV0QxM3M2ZHZjYzc0RFg0NGgyLUtGSFlNeURWU284TExvWC13YVBFei0wRy1jVFZsX081T25fSzVtcVc2dwwIQgIAAAAAAAANAA4ABA8ZY3liZXJjaXR5Lm9ubGluZUB3YWhlci5zZQUPD1JlbW90ZUVuZHBvaW50cwZMsH/eU+4K2AgIDP8/N/R1KMorAAAAAAAPWy4o2YNJxsRtvvXSoABFoQQAAQ+RATIwMjBcMDZcMDdcNmQ5NTY2NGE5NjNmOTA5MjQ5ZTQzZmM4YjgxZjMwOGQ3NTE1MTUxYzRkYWIwNzZmMDc5ZTJlNGYzOGU0YjE1NDA1OGVjMTY3NmIxYTEwYjBiMjIwZDRjNzE2ODM0NjI0MTdiYTZjYmE2MDE0ZjAwZWExNGY2ODljNjIwOWJjMTUuYmxvY2sCEUCOYnhyNlri/ZgQ/yxRz1mfGw1fSDj/KsMIxjrMdXbJB7xLemqJNxYgTVVZBO4s/FmGTVIyGvFg+yCaQCB+2IPUAxFyqkQHpvpuRNB0D9dlp0B56HlMV1lpGPkc+/4omo5nmuHNWfcbvYtHzIn7rpGma58nhUpaUApmyj4A/nSyR+Jb/rpd/Yp14PgWvvYiTgjA+MUWvtTp1IXL7dtUhMDfuYqTMUPaeKM4Hk/yiiTl/VsNbBcACx4B3QN9aHR0cHg6Ly9sYWIudGFncm9vdC5pb0B0YWdyb290LmlvL05ML0Ivam1KNGNqWmE0djJZRVA4c1VjOVpueHNOWDBnNF95ckRDTVk2ekhWMnlRZThTM3BxaVRjV0lFMVZXUVR1TFB4WmhrMVNNaHJ4WVBzZ21rQWdmdGlEMUEMCD8CAAAAAAAADQAOAAQPGGJyLnRhZ3Jvb3QuaW9AdGFncm9vdC5pbwUPD1JlbW90ZUVuZHBvaW50cwZMQFLaxPYK2AgIDP8/N/R1KMorAAAAAAAPWy4o2YNKxsRtvvXS867TogQAAQ+RATIwMjBcMDZcMDdcYzgyYmM3MGIwYTQxYzc2NGY4YzNiNDQ3Mzg5YjJiZTIxMTQ2NWVjN2UxMzAwZDk1N2QxZDI1NGVlMTg1ZjUzNjcyYjM2NzY2NTY2NTdlMjM4NTEyODg0ZDFiZGFjYWFlYzA4MDA5ZjI1NTAyZmEyZjNlZGZkZDVjYjYwZTAzZjYuYmxvY2sCEUCO8fJ4W8g8J6HTM8cRf5C94o7lSvCZLu3iPZRFb3fgSkFA9gi8edcQzLTg+FUBCbkdWqY51I2N6fNlZYjSbP2UAxFyNATGTKEjH6ZE3dIb+IdxDEi8b5Kp1j29TJQb7Xitbx8kTfh2IUbzDtWDo9Lx2YGu0Bi6KwnBrEYAXcw31qWhnEt9exaFDPHPmh7YEOSCTwbRL9XwNW8bDuaTQLwQOUN3BcuFpmr6yO0Rx9nEpZ+JDgsACx4B3QN9aHR0cHg6Ly9sYWIudGFncm9vdC5pb0B0YWdyb290LmlvL05ML0IvanZIeWVGdklQQ2VoMHpQSEVYLVF2ZUtPNVVyd21TN3Q0ajJVUlc5MzRFcEJRUFlJdkhuWEVNeTA0UGhWQVFtNUhWcW1PZFNOamVuelpXV0kwbXo5bEEMCEICAAAAAAAADQAOAAQPGWxhYi50YWdyb290LmlvQHRhZ3Jvb3QuaW8FDw9SZW1vdGVFbmRwb2ludHMGTECrUJQCC9gICAz/Pzf0dSjKKwAAAAAAD1suKNmDS8bEbb710iLFZ6oEAAEPkQEyMDIwXDA2XDA3XDk0NGFhMzZiODQ0NjA0NDM5NTE2MDFiODVmOWUxMjE4NjVlOGU1YjFlZmFmN2QwZmY3Mzc2MmUzODM2YmNiYmE2MjZhNDhlZGMxMTFhMDlhZTYxMGIyNWY3MTYzZGU3MjA4MzJjMGRlYzVlNmQzNGZmZjZkZDVkZjhiOTJmYTgyLmJsb2NrAhFAlK1cp19bsLd2OJffNOOees4M0vdIBN+GTvPIbQezmdU4XPQ4QrFgDvYlkjZFXq1VcvvTj1cojv7GXn6LPZIr7AMRchSnTSqNYeXV4fl/nBJRhCvLRqU2pcMsHD3eUWTAJp6xM9f9GZBtJaWET6AD3OYAjfB2yXU+Ul2rAHUQ/Rna4Zbq4vRBnJApeKKE1YqczQ0DpAa+5QglRvbnCi1WwhhkqrWPM3BGRU+6GIrlUGyqAUwgAAseAd0DfWh0dHB4Oi8vbGFiLnRhZ3Jvb3QuaW9AdGFncm9vdC5pby9OTC9CL2xLMWNwMTlic0xkMk9KZmZOT09lZXM0TTB2ZElCTi1HVHZQSWJRZXptZFU0WFBRNFFyRmdEdllsa2paRlhxMVZjdnZUajFjb2p2N0dYbjZMUFpJcjdBDAhGAgAAAAAAAA0ADgAEDyFndWlkZS50YWdyb290LmlvQGN5YmVyY2l0eS5vbmxpbmUFDw9SZW1vdGVFbmRwb2ludHMGTDDujDqTCtgICAz/Pzf0dSjKKwAAAAAAD1suKNmDTMbEbb710pbVcaIEAAEPkQEyMDIwXDA2XDE3XDJhODdhZjcyMzA2MWRiNDczNzQyZWZkN2UwMTA5YTcyZmNhYzJmMTEzMWQ1OWQ2Y2EyYTA3OTVhYjBjMzIwOTRhZTg1Y2JhMDM1MWM4ZGE1MWMzOTQwNTcyYzhjZWVhMjA4NmVlY2UxMWQzZWRhZTkyZGEyYTBmMzEyYTIxYWFlLmJsb2NrAhFAYbG4n/1etaIsQY5Vq8QgxxRGTlFY3EDdDXyBVLaev+QBYOdzc2KlbhaNH9ozkTWbRSKDsTTtn4wUvreieOWiQAMRcn4JdASY5sM9THbdFaq8+TEF59XVgY/VW+PAMmA6A5Yj4QSMMZXdjUwFvzxA2aRVRH1Nj7wMTOJ1gEXGxgC/vBIhWYaE8hRTyucQsoGesoNwN9HDdNkMYItnHh/pE0+hji+omMTNR8Edp3ucpardOSc9AAseAd0DdWh0dHB4Oi8vd2FoZXIuc2VAd2FoZXIuc2UvTkwvQi9ZYkc0bl8xZXRhSXNRWTVWcThRZ3h4UkdUbEZZM0VEZERYeUJWTGFldi1RQllPZHpjMktsYmhhTkg5b3prVFdiUlNLRHNUVHRuNHdVdnJlaWVPV2lRQQwIlgEAAAAAAAANAA4ABA8hZ3VpZGUudGFncm9vdC5pb0BjeWJlcmNpdHkub25saW5lBQ8PUmVtb3RlRW5kcG9pbnRzBkzQzP6aYhLYCAgM/z839HUoyisAAAAAAA9bLijZg03GxG2+9dLJLnKhBAABD5EBMjAyMFwwNlwwN1xkMjFjNjA1ZGNkOWUxZDZlZjlhYmY4MmQ4ZDQzYWE1NWUxYWQ5Yjc2Y2UwMTQ3MmJmOWNlMjlhM2E5NDNmMjc5NjU5MDY2ZGQ3OGE4NWNmZWYwNTBhYWY3Mjg3MzNmMzk1Nzg1MDcwMTI1NDI0NDMxZjljMWI0MmI1OWEzMGEzOS5ibG9jawIRQJeSSN5B+E3rd/PkYDpVGPZm6MEw4JH0m852NBUIbUueSY+A5eRa31egk+3URfudJKJHOVecO7oFNSoUkeAImAADEXLguXua2/vlvyZnWhFF8EQbXRVpuxN21dEVAsoJUGIO7NFtt56Il65JO7fgdbkZJTUw9kdwVRKS14BCAqJIcCodTkRG1bAhg9uJEi/jhNg64kNQ0+m/+xK+97uT6LDYMQ6lVqT4qpnvbOuDZb9OfTseNAALHgHdA31odHRweDovL2xhYi50YWdyb290LmlvQHRhZ3Jvb3QuaW8vTkwvQi9sNUpJM2tINFRldDM4LVJnT2xVWTltYm93VERna2ZTYnpuWTBGUWh0UzU1Smo0RGw1RnJmVjZDVDdkUkYtNTBrb2tjNVY1dzd1Z1UxS2hTUjRBaVlBQQwIPQIAAAAAAAANAA4ABA8YdGFncm9vdEBjeWJlcmNpdHkub25saW5lBQ8PUmVtb3RlRW5kcG9pbnRzBkxwqqTruQrYCAgM/z839HUoyisAAAAAAA9bLijZg07GxG2+9dLRriGiBAABD5EBMjAyMFwwNlwxN1wxZDI1MmQ5MGVhNjU2YjFlYzRhMGQ0ZTg3ZDkzYmJiYWRhZGQ1MDkzZGIzOTljODYxZWY2OGM5N2JlYjljZmQxOGE0MGJkYjk1NWI2OWFjODU5ZTI0NDhlODRjZjA5ZWZmMDNlMTk4ZDZjYzYxY2E1NGFlNTllYzRiZDVjMzM1NC5ibG9jawIRQH2BbvYnU56/da09VJaMxW8y2+zLi94scHOUOoi4PThkvmR451I/WOvcSysUDt3BFtt+mfz5UPyApSp6heB5XCgDEXKId260hupJj+tW8/agtvpSzROIjFJrTup7lPC/lp+DLH+KE2MZwcQBhLkn6KeoPipAZLWEUkQ6vgC73SiZvaO3sG1Ef/5boibPzvt+uAsK5ksdYjGiDFaA1wU41Goo0398zwX9U1vmaQne9wroKDNGNwALHgHdA3VodHRweDovL3dhaGVyLnNlQHdhaGVyLnNlL05ML0IvZllGdTlpZFRucjkxclQxVWxvekZiekxiN011TDNpeHdjNVE2aUxnOU9HUy1aSGpuVWo5WTY5eExLeFFPM2NFVzIzNlpfUGxRX0lDbEtucUY0SGxjS0EMCEgCAAAAAAAADQAOAAQPIWd1aWRlLnRhZ3Jvb3QuaW9AY3liZXJjaXR5Lm9ubGluZQUPD1JlbW90ZUVuZHBvaW50cwZM8M3CmwMT2AgIDP8/N/R1KMorAAAAAAAPWy4o2YNPxsRtvvXS6NY8mgQAAQ+RATIwMjBcMDZcMDdcYmI3ZjllODIwYmIzNzU2MGY2Mjk2OWI2OTY5YzQ3MGFlYThhOTFlZmE1MmYzNjRlY2JiZGZkYjEwNGFiNzQzNmFkNWM0ZmYxNjczNWVhODIyNDYzY2FjMTNjOTI2YTBiODRiMmM3MzQ4MWU4NWE2ODYwNThkNDg1YTA0NmJhNTkuYmxvY2sCEUCZmdBrpWixaZhTq94nL1N6ZHNh2y+yyOn1QFrPRRXQefzcZrXhhoRqyPwg9mnl1auo/jpGaYdCxndmU8OxgE7TAxFyp8c2bWYgrbMdG8U9SBpCthh9/q7KjjWIKpcsg8tIYySzwREFS401cB9vg3BvotwLWTKu6k8IttkA3hrs1EvaIn1vc8XR55zUelb3Rm2Y0/s3zaRxDlanQir9quDUafO694TrEjn9q1rTQyvZHDVotysACx4B3QN9aHR0cHg6Ly9sYWIudGFncm9vdC5pb0B0YWdyb290LmlvL05ML0IvbVpuUWE2Vm9zV21ZVTZ2ZUp5OVRlbVJ6WWRzdnNzanA5VUJhejBVVjBIbjgzR2ExNFlhRWFzajhJUFpwNWRXcnFQNDZSbW1IUXNaM1psUERzWUJPMHcMCDoCAAAAAAAADQAOAAQPEXdhaGVyLnNlQHdhaGVyLnNlBQ8PUmVtb3RlRW5kcG9pbnRzBkwgdxtbJAvYCAgM/z839HUoyisAAAAAAA9bLijZg1DGxG2+9dK72cieBAABD5EBMjAyMFwwNlwxN1wxZDFlYjAzMzE1ZDNlYzk2ZTM2Y2EyZDQxYTQxY2RhMmM0ZjZlMDlhOGRlNGQzNmM0ODgzNDliZGIwNDZlNjA1MDFlMzkyOTU3NWQwOWI4NDllZjYzNGE4MTdlMzQzMzYxM2I0YmM0YWMxYWYwMGQ3OWNiYTNlNzI2NWQyZTFjMC5ibG9jawIRQGMbEo1t/bN94Yw/+kIsnM0/CJmnQ4AFtsFJ7j1MUfdyMJ/SZM/aQOwXtIFlAF1IpD+ZGQ4IqyRxJ3oEnTQ9+zMDEXLS1b6G4WH/G2Gua1Egb51CsYLawHjofm3GnwSQrfdZfgmAI9KegIGHtxZ80LtkOjBxcx5VdK2IiwD9AsTRWEUXO0nLKpogSkUTPfqqhu+zZbP3rYBBiKnL93OaO3r8LZLnyArt349SJAyQ0QVERqMFHgALHgHdA3VodHRweDovL3dhaGVyLnNlQHdhaGVyLnNlL05ML0IvWXhzU2pXMzlzMzNoakRfNlFpeWN6VDhJbWFkRGdBVzJ3VW51UFV4UjkzSXduOUprejlwQTdCZTBnV1VBWFVpa1A1a1pEZ2lySkhFbmVnU2RORDM3TXcMCPICAAAAAAAADQAOAAQPHXBhaXdpc2UudGFncm9vdC5pb0B0YWdyb290LmlvBQ8PUmVtb3RlRW5kcG9pbnRzBkzA28C2AhPYCAgM/z839HUoyisAAAAAAA9bLijZg1HGxG2+9dIPSuCqBAABD5EBMjAyMFwwNlwwN1xkOWIzMjc4NjIzYzNiZTIxODhiMDJkZjQ0MGYyNTkwYzExZGE1OTI4YzFmZGQ3Njc5NDViZGIzZGM5MGVhNTEzNjI0YmRkZDIxNjJkZmZhNTU4ODg3MzM5NTg5ZjQ3NTk1MWMzNmQxYjgxN2M0OTg2ZjY1ZDlkZDQ0MDM2MzBlYi5ibG9jawIRQJqvNt+Uc6VE901wm5ZifY2TdhX0YNBrBRPDOEg2/nrVZ7usbTtruIAlD0VmOrgHw2wbek0ufeVILwmaYT6w0qEDEXJIfXBfJVa1gzbU8ZeHQ5l/xytCIZyKsja/aWra+us1hKu0h4DB/1RzDxxDRLauJv7rtLidr+na2ICOvkxBuq+pzOEm2kSmWlXwhOhobQZF0fL8pJTfCQXztiIQiyc6K+Z2lUXvvgkngFGbTJ8PQ7b3HgALHgHdA31odHRweDovL2xhYi50YWdyb290LmlvQHRhZ3Jvb3QuaW8vTkwvQi9tcTgyMzVSenBVVDNUWENibG1KOWpaTjJGZlJnMEdzRkU4TTRTRGItZXRWbnU2eHRPMnU0Z0NVUFJXWTZ1QWZEYkJ0NlRTNTk1VWd2Q1pwaFByRFNvUQwIrgcAAAAAAAANAA4ABA8hZ3VpZGUudGFncm9vdC5pb0BjeWJlcmNpdHkub25saW5lBQ8PUmVtb3RlRW5kcG9pbnRzBkxwszSJoQrYCAgM/z839HUoyisAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=");
			await ParseBlock(Block);
		}

		[TestMethod]
		public async Task DBFiles_Block_Test_04_Parse()
		{
			byte[] Block = Convert.FromBase64String("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");
			await ParseBlock(Block);
		}

		[TestMethod]
		public async Task DBFiles_Block_Test_05_Parse()
		{
			byte[] Block = Convert.FromBase64String("VwIDAAAAAAAAAAAAAAAAAAAA0tQ/KAkhyxS9NcvHATGGHyYcARLS1D8oCSHMFL01y8cB4AQ4GBLS1D8oCSHNFL01y8cBdF6uAAAAAADS1D8oCSHMFL01y8cB4AQ44wEdAwAFAfkGAo9WBwP1Wk3oCAQAlLUirMlakQkFVAoG6j4LB3AFAAAMCCBlAAAAAAAADQ4Qcg4JD6AkwHRFAwAAAAAAAAAPAA8KFd8ueYpv5z8QC0IeTj8RD1JvU0x5a11vYiBYaCwtQmNkeU0kVkk+fk1jSHREPz5aQml+IUNjUkZXLC1GTSVCdUhlMms/Pk9CUFN9NUNoS0JhfEZCLUBAIUYmTEk7d1FHQVFLEgyw+pYcSpyjCBMNuk7fjgAAAAAUEuupiGOJI55PshcuFvpMUMAVEAdPcHRpb24zFgMCAAAAAAAAAADS1D8oCSHNFL01y8cBdF6ujQIeA0AEAAUBCwYC4sYHAzlSmSAIBAB4sQCbulgACQVUCgbJXAsHQicAAAwI1wQAAAAAAAANDhjSDgm78D6DrWwCAAAAAAAAAA8ADwpji/FGscXoPxALk9k2PxEPTihFMUQ4cSYmVyFVcnA8bDYvYUEnUXBQOykjXWdRNCJoQWhDOHotIjI0VXZtL0kyUXNSVGw8dzY2dHQ7NTM9VEN+bFAnd1M7Il4vcnt4YhkPCixebytyfV41S0kSDKAqD1clDsAIGhNQ16m8XBPlCAAAAAAAAAAAEw2CpIlgCAAAABQSRj0PR3ARcEuuMCTI7NRIGhUQB09wdGlvbjMWAwIAAAAbFAosXm8rcn1eNUtJAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=");
			await ParseBlock(Block);
		}

		private static async Task ParseBlock(byte[] Block)
		{ 
			BinaryDeserializer Reader = new("Default", Encoding.UTF8, Block, int.MaxValue);
			GenericObjectSerializer Serializer = new(provider, false);
			
			ushort BytesUsed = Reader.ReadUInt16();
			uint SizeSubtree = Reader.ReadUInt32();
			uint LastBlockIndex = Reader.ReadBlockLink();
			uint ParentBlockIndex = Reader.ReadBlockLink();

			ConsoleOut.WriteLine("BytesUsed: " + BytesUsed);
			ConsoleOut.WriteLine("SizeSubtree: " + SizeSubtree);
			ConsoleOut.WriteLine("LastBlockIndex: " + LastBlockIndex);
			ConsoleOut.WriteLine("ParentBlockIndex: " + ParentBlockIndex);

			while (Reader.Position < BytesUsed)
			{
				ConsoleOut.WriteLine();
				ConsoleOut.WriteLine("Position: " + Reader.Position);

				uint LeftLink = Reader.ReadUInt32();

				ConsoleOut.WriteLine("LeftLink: " + LeftLink);

				GenericObject Obj = await Serializer.Deserialize(Reader, ObjectSerializer.TYPE_OBJECT, false, false) as GenericObject;
				Assert.IsNotNull(Obj);

				ConsoleOut.WriteLine("CollectionName: " + Obj.CollectionName);
				ConsoleOut.WriteLine("TypeName: " + Obj.TypeName);
				ConsoleOut.WriteLine("ObjectId: " + Obj.ObjectId);
				ConsoleOut.WriteLine("ArchivingTime: " + Obj.ArchivingTime);

				foreach (KeyValuePair<string, object> P in Obj.Properties)
				{
					ConsoleOut.Write(P.Key);
					ConsoleOut.Write("=");
					ConsoleOut.WriteLine(P.Value);
				}
			}
		}
	}
}
